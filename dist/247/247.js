"use strict";(self.webpackChunkchocolatestore=self.webpackChunkchocolatestore||[]).push([[247],{5247:(n,e,t)=>{t.r(e),t.d(e,{default:()=>I});var r=t(6664),i=t(7294),A=t(5861),o=t(4942),a=t(885),s=t(7757),p=t.n(s),d=t(3379),m=t.n(d),c=t(2126);m()(c.Z,{insert:"head",singleton:!1}),c.Z.locals;var l=t(4494),u=t(5438),E=t(5503),C=t(9669),h=t.n(C),y=t(5977),f=t(5557),B=t(4327),w=t(5508),b=t(2353),g=t(4405),x=t(3116),_=t(525),v=t(5893);function k(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function j(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?k(Object(t),!0).forEach((function(e){(0,o.Z)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):k(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}const S=function(){var n=(0,l.I0)(),e=(0,i.useState)({success:!1,submitted:!1,payment_method_submit:!1,payment_method:"",value:"",status:"",paymentIntent:{},submitCount:0,accepted:!1}),t=(0,a.Z)(e,2),o=t[0],s=t[1],d=(0,i.useState)(""),m=(0,a.Z)(d,2),c=m[0],C=m[1],k=(0,y.k6)().push,S=(0,l.v9)(u.ej),z=(0,l.v9)(f.wY),Y=(0,r.useStripe)(),W=(0,r.useElements)(),I=function(){var e=(0,A.Z)(p().mark((function e(t){var i,A,a,d,m,c;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),o.submitCount>=4&&(C("Too many submits, please wait for response"),setTimeout((function(){return s(j(j({},o),{},{submitCount:0,submitted:!1}))}),2e3)),o.submitCount>=10&&C("Do not spam the prompt!"),s(j(j({},o),{},{submitted:!0,submitCount:o.submitCount+1})),Y&&W){e.next=6;break}return e.abrupt("return");case 6:if(t.currentTarget.reportValidity()){e.next=8;break}return e.abrupt("return");case 8:if(o.accepted){e.next=11;break}return C("Finish payment information!"),e.abrupt("return");case 11:return i=W&&W.getElement(r.CardElement),z&&!0===o.accepted&&n((0,x.Ue)({total_price:S,status:g.iF.UNPAID,address:z.address,country:z.country,city:z.city,postalcode:z.postalcode})),e.next=15,h().post(w.m2+"create-payment-intent",{amount:S,currency:"usd",payment_method_types:"card"},{headers:(0,E.zl)()});case 15:if(A=e.sent,o.accepted&&C("Processing payment..."),500!==A.status){e.next=21;break}return C(A.data.message),s(j(j({},o),{},{status:"error"})),e.abrupt("return");case 21:if(i){e.next=23;break}return e.abrupt("return");case 23:return e.next=25,null==Y?void 0:Y.confirmCardPayment(A.data.client_secret,{payment_method:{card:i}});case 25:a=e.sent,d=a.error,m=a.paymentIntent,d?(s(j(j({},o),{},{status:"error"})),C(null!==(c=d.message)&&void 0!==c?c:"An unknown error occured")):m&&s(j(j({},o),{},{paymentIntent:m})),m&&"succeeded"===m.status&&(n((0,_.Sq)()),n((0,B.LL)()),n((0,b.Pj)()),setTimeout((function(){return k("/purchase-confirmed")}),500));case 30:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,v.jsxs)("div",{className:"order-payment",children:[(0,v.jsxs)("h3",{id:"stripe-notice",children:["Use ",(0,v.jsx)("i",{id:"stripe-testnums",children:"4242 4242 4242 4242"})," for stripe to test the payment"]}),(0,v.jsxs)("div",{className:"order-payment__wrapper",children:[o.payment_method_submit?o.payment_method_submit&&"stripe"===o.payment_method?(0,v.jsx)("div",{className:"payment-stripe",children:(0,v.jsx)("form",{onSubmit:I,children:(0,v.jsxs)("fieldset",{className:"elements-style",children:[(0,v.jsx)("legend",{children:"Card details:"}),(0,v.jsx)("div",{className:"FormRow elements-style",children:(0,v.jsx)(r.CardElement,{options:{disabled:!1,iconStyle:"solid",style:{base:{iconColor:"#6772e5",color:"#6772e5",fontWeight:600,fontFamily:"Montserrat, Open Sans, Segoe UI, sans-serif",fontSize:"10px",fontSmoothing:"antialiased",":-webkit-autofill":{color:"#6772e5"},"::placeholder":{color:"#6772e5"}},invalid:{iconColor:"#ffc7ee",color:"#ffc7ee"}}},onChange:function(n){var e;o.submitted&&n.empty&&C("Do not submit an empty form!"),n.error&&(s(j(j({},o),{},{status:"error"})),C(null!==(e=n.error.message)&&void 0!==e?e:"An unknown error occured")),!n.empty&&n.complete&&s(j(j({},o),{},{accepted:!0}))}})}),(0,v.jsxs)("button",{className:"elements-style",disabled:!!o.submitted,onClick:function(){return s(j(j({},o),{},{submitted:!0,submitCount:o.submitCount+1}))},children:["Pay $",S]})]})})}):null:(0,v.jsxs)("form",{onSubmit:function(n){n.preventDefault(),"stripe"===n.currentTarget.elements.namedItem("method").value?s(j(j({},o),{},{payment_method:"stripe",payment_method_submit:!0})):"paypal"===n.currentTarget.elements.namedItem("method").value&&s(j(j({},o),{},{payment_method:"paypal",payment_method_submit:!0}))},children:[(0,v.jsx)("legend",{children:"Select payment method"}),(0,v.jsxs)("fieldset",{children:[(0,v.jsx)("input",{type:"radio",id:"stripe",name:"method",value:"stripe"}),(0,v.jsx)("label",{htmlFor:"stripe",children:"Stripe"})]}),(0,v.jsx)("input",{type:"submit",value:"Submit"})]}),(0,v.jsx)("div",{className:"order-payment__error-prompt",children:(0,v.jsx)("p",{children:c})})]})]})};var z=t(1291),Y={fonts:[{cssSrc:"https://fonts.googleapis.com/css?family=Montserrat"}]},W=(0,z.J)("pk_test_51HUuCuDiJxi7nioJsEusYP3Ty7hbKaquESZBYVkCuY3g9w2roo3BSMJMPK529s7EIIcBsSxhV6Ym9xFzwCHM0Q9L00KOmEYf1f");const I=function(){return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(r.Elements,{stripe:W,options:Y,children:(0,v.jsx)(S,{})})})}},2126:(n,e,t)=>{t.d(e,{Z:()=>a});var r=t(4015),i=t.n(r),A=t(3645),o=t.n(A)()(i());o.push([n.id,".order-payment {\n  display: grid;\n  justify-content: center;\n  height: 100vh;\n  background: #38242c;\n  font-family: 'Montserrat', sans-serif;\n}\n\n.order-payment__wrapper {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  width: 50vw;\n  align-items: center;\n  padding: 45px 25px;\n}\n\n.order-payment__wrapper form {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid black;\n  padding: 20px;\n  background-color: #fffffe;\n}\n\n.order-payment__wrapper form input {\n  padding: 10px;\n  margin: 1em 0.4em 1em 2em;\n}\n\n.order-payment__wrapper form input[type=radio] {\n  padding: 5px;\n  cursor: pointer;\n}\n\n.order-payment__wrapper form label {\n  font-size: 1.4em;\n  font-weight: bold;\n  cursor: pointer;\n  color: #5f6c7b;\n}\n\n.order-payment__wrapper input[type=submit] {\n  font-size: 1.2em;\n  padding: 1em;\n  margin: 1em;\n  width: 15em;\n  background: #3da9fc;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: 500ms ease-in;\n}\n\n.order-payment__wrapper input[type=submit]:hover {\n  background: orange;\n}\n\n.order-payment__wrapper form legend {\n  font-family: 'Montserrat', sans-serif;\n  font-size: 1.6em;\n  font-weight: 500;\n  padding: 1em;\n  color: #5f6c7b;\n}\n\n.order-payment__error-prompt p {\n  font-size: 1.3em;\n  padding: 1.5em;\n  color: #ef4565;\n}\n\n/* -- Stripe Wrapper -- */\n\n.payment-stripe {\n  position: relative;\n  border: 3px solid #6772e5;\n  background-color: white;\n  width: 70%;\n}\n\n.payment-stripe form {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  padding: 2rem;\n}\n\n.payment-stripe legend {\n  font-size: 1em;\n  font-weight: 600;\n}\n\n/* -- Stripe Elements Styling -- */\n\n.elements-style {\n  padding: .5em;\n  color: #6772e5;\n  border: 1px solid #6772e5;\n  width: inherit;\n}\n\n.FormRow {\n  border: 1px solid #6772e5;\n  padding: 10px;\n  border-radius: 6px;\n  width: inherit;\n}\n\n.payment-stripe button {\n  display: block;\n  font-family: 'Montserrat', sans-serif;\n  font-size: 1.2em;\n  margin-top: 1em;\n  padding: .5em;\n  width: 100%;\n  color: white;\n  background-color: #6772e5;\n  cursor: pointer;\n}\n\n@media (max-width: 1350px) {\n  .payment-stripe {\n    width: 85%;\n  }\n}\n\n@media (max-width: 1280px) {\n  .payment-stripe {\n    width: 90%;\n  }\n}\n\n@media (max-width: 1205px) {\n  .payment-stripe {\n    width: 100%;\n  }\n}\n\n@media (max-width: 1100px) {\n  .order-payment__wrapper {\n    width: 65vw;\n    border: 1px solid white;\n  }\n  .payment-stripe {\n    width: 90%;\n  }\n}\n\n@media (max-width: 940px) {\n  .order-payment__wrapper {\n    width: 85vw;\n    border: 1px solid white;\n  }\n}\n\n@media (max-width: 720px) {\n  .order-payment__wrapper {\n    width: 95vw;\n    border: 1px solid white;\n  }\n  .payment-stripe {\n    width: 100%;\n  }\n}\n\n@media (max-width: 580px) {\n  .order-payment__wrapper {\n    width: 100vw;\n    border: 1px solid white;\n  }\n  .payment-stripe {\n    width: 100vw;\n  }\n}\n\n#stripe-notice {\n  position: absolute;\n  top: 3.5rem;\n  left: 50%;\n  transform: translate(-50%, 0);\n  color: white;\n}\n\n#stripe-testnums {\n  font-size: 1.2rem;\n  font-style: italic;\n  margin-left: 0.35rem;\n  margin-right: 0.35rem;\n  color: yellow;\n}\n","",{version:3,sources:["webpack://./src/pages/order-payment/order-payment.css"],names:[],mappings:"AAAA;EACE,aAAa;EACb,uBAAuB;EACvB,aAAa;EACb,mBAAmB;EACnB,qCAAqC;AACvC;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,sBAAsB;EACtB,uBAAuB;EACvB,WAAW;EACX,mBAAmB;EACnB,kBAAkB;AACpB;;AAEA;EACE,kBAAkB;EAClB,aAAa;EACb,sBAAsB;EACtB,uBAAuB;EACvB,mBAAmB;EACnB,uBAAuB;EACvB,aAAa;EACb,yBAAyB;AAC3B;;AAEA;EACE,aAAa;EACb,yBAAyB;AAC3B;;AAEA;EACE,YAAY;EACZ,eAAe;AACjB;;AAEA;EACE,gBAAgB;EAChB,iBAAiB;EACjB,eAAe;EACf,cAAc;AAChB;;AAEA;EACE,gBAAgB;EAChB,YAAY;EACZ,WAAW;EACX,WAAW;EACX,mBAAmB;EACnB,YAAY;EACZ,YAAY;EACZ,kBAAkB;EAClB,eAAe;EACf,yBAAyB;AAC3B;;AAEA;EACE,kBAAkB;AACpB;;AAEA;EACE,qCAAqC;EACrC,gBAAgB;EAChB,gBAAgB;EAChB,YAAY;EACZ,cAAc;AAChB;;AAEA;EACE,gBAAgB;EAChB,cAAc;EACd,cAAc;AAChB;;AAEA,yBAAyB;;AAEzB;EACE,kBAAkB;EAClB,yBAAyB;EACzB,uBAAuB;EACvB,UAAU;AACZ;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,YAAY;EACZ,aAAa;AACf;;AAEA;EACE,cAAc;EACd,gBAAgB;AAClB;;AAEA,kCAAkC;;AAElC;EACE,aAAa;EACb,cAAc;EACd,yBAAyB;EACzB,cAAc;AAChB;;AAEA;EACE,yBAAyB;EACzB,aAAa;EACb,kBAAkB;EAClB,cAAc;AAChB;;AAEA;EACE,cAAc;EACd,qCAAqC;EACrC,gBAAgB;EAChB,eAAe;EACf,aAAa;EACb,WAAW;EACX,YAAY;EACZ,yBAAyB;EACzB,eAAe;AACjB;;AAEA;EACE;IACE,UAAU;EACZ;AACF;;AAEA;EACE;IACE,UAAU;EACZ;AACF;;AAEA;EACE;IACE,WAAW;EACb;AACF;;AAEA;EACE;IACE,WAAW;IACX,uBAAuB;EACzB;EACA;IACE,UAAU;EACZ;AACF;;AAEA;EACE;IACE,WAAW;IACX,uBAAuB;EACzB;AACF;;AAEA;EACE;IACE,WAAW;IACX,uBAAuB;EACzB;EACA;IACE,WAAW;EACb;AACF;;AAEA;EACE;IACE,YAAY;IACZ,uBAAuB;EACzB;EACA;IACE,YAAY;EACd;AACF;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,SAAS;EACT,6BAA6B;EAC7B,YAAY;AACd;;AAEA;EACE,iBAAiB;EACjB,kBAAkB;EAClB,oBAAoB;EACpB,qBAAqB;EACrB,aAAa;AACf",sourcesContent:[".order-payment {\n  display: grid;\n  justify-content: center;\n  height: 100vh;\n  background: #38242c;\n  font-family: 'Montserrat', sans-serif;\n}\n\n.order-payment__wrapper {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  width: 50vw;\n  align-items: center;\n  padding: 45px 25px;\n}\n\n.order-payment__wrapper form {\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  border: 1px solid black;\n  padding: 20px;\n  background-color: #fffffe;\n}\n\n.order-payment__wrapper form input {\n  padding: 10px;\n  margin: 1em 0.4em 1em 2em;\n}\n\n.order-payment__wrapper form input[type=radio] {\n  padding: 5px;\n  cursor: pointer;\n}\n\n.order-payment__wrapper form label {\n  font-size: 1.4em;\n  font-weight: bold;\n  cursor: pointer;\n  color: #5f6c7b;\n}\n\n.order-payment__wrapper input[type=submit] {\n  font-size: 1.2em;\n  padding: 1em;\n  margin: 1em;\n  width: 15em;\n  background: #3da9fc;\n  color: white;\n  border: none;\n  border-radius: 5px;\n  cursor: pointer;\n  transition: 500ms ease-in;\n}\n\n.order-payment__wrapper input[type=submit]:hover {\n  background: orange;\n}\n\n.order-payment__wrapper form legend {\n  font-family: 'Montserrat', sans-serif;\n  font-size: 1.6em;\n  font-weight: 500;\n  padding: 1em;\n  color: #5f6c7b;\n}\n\n.order-payment__error-prompt p {\n  font-size: 1.3em;\n  padding: 1.5em;\n  color: #ef4565;\n}\n\n/* -- Stripe Wrapper -- */\n\n.payment-stripe {\n  position: relative;\n  border: 3px solid #6772e5;\n  background-color: white;\n  width: 70%;\n}\n\n.payment-stripe form {\n  position: relative;\n  width: 100%;\n  height: 100%;\n  padding: 2rem;\n}\n\n.payment-stripe legend {\n  font-size: 1em;\n  font-weight: 600;\n}\n\n/* -- Stripe Elements Styling -- */\n\n.elements-style {\n  padding: .5em;\n  color: #6772e5;\n  border: 1px solid #6772e5;\n  width: inherit;\n}\n\n.FormRow {\n  border: 1px solid #6772e5;\n  padding: 10px;\n  border-radius: 6px;\n  width: inherit;\n}\n\n.payment-stripe button {\n  display: block;\n  font-family: 'Montserrat', sans-serif;\n  font-size: 1.2em;\n  margin-top: 1em;\n  padding: .5em;\n  width: 100%;\n  color: white;\n  background-color: #6772e5;\n  cursor: pointer;\n}\n\n@media (max-width: 1350px) {\n  .payment-stripe {\n    width: 85%;\n  }\n}\n\n@media (max-width: 1280px) {\n  .payment-stripe {\n    width: 90%;\n  }\n}\n\n@media (max-width: 1205px) {\n  .payment-stripe {\n    width: 100%;\n  }\n}\n\n@media (max-width: 1100px) {\n  .order-payment__wrapper {\n    width: 65vw;\n    border: 1px solid white;\n  }\n  .payment-stripe {\n    width: 90%;\n  }\n}\n\n@media (max-width: 940px) {\n  .order-payment__wrapper {\n    width: 85vw;\n    border: 1px solid white;\n  }\n}\n\n@media (max-width: 720px) {\n  .order-payment__wrapper {\n    width: 95vw;\n    border: 1px solid white;\n  }\n  .payment-stripe {\n    width: 100%;\n  }\n}\n\n@media (max-width: 580px) {\n  .order-payment__wrapper {\n    width: 100vw;\n    border: 1px solid white;\n  }\n  .payment-stripe {\n    width: 100vw;\n  }\n}\n\n#stripe-notice {\n  position: absolute;\n  top: 3.5rem;\n  left: 50%;\n  transform: translate(-50%, 0);\n  color: white;\n}\n\n#stripe-testnums {\n  font-size: 1.2rem;\n  font-style: italic;\n  margin-left: 0.35rem;\n  margin-right: 0.35rem;\n  color: yellow;\n}\n"],sourceRoot:""}]);const a=o}}]);
//# sourceMappingURL=247.js.map